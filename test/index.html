<!DOCTYPE html>
<html>
<head>
    <title>Pusher Chatroom</title>
    <!-- Add Pusher library -->
    <script src="https://js.pusher.com/7.0/pusher.min.js"></script>
</head>
<body>
    <div id="chatbox"></div>
    <input type="text" id="message" placeholder="Type your message...">
    <button id="sendButton">Send</button>

    <script>
        const chatbox = document.getElementById("chatbox");
        const messageInput = document.getElementById("message");
        const sendButton = document.getElementById("sendButton");

        const pusher = new Pusher('b7030f8f3d1f72f81d17', {
            cluster: 'us2',
            encrypted: true
        });

        const channel = pusher.subscribe('chat-channel');

        channel.bind('new-message', function(data) {
            const newMessage = document.createElement('p');
            newMessage.textContent = data.message;
            chatbox.appendChild(newMessage);
            chatbox.scrollTop = chatbox.scrollHeight;
        });

        sendButton.addEventListener("click", () => {
            const message = messageInput.value;
            if (message.trim() !== "") {
                channel.trigger('client-new-message', { message });
                messageInput.value = "";
            }
        });

        messageInput.addEventListener("keydown", (event) => {
            if (event.key === "Enter") {
                sendButton.click();
            }
        });
    </script>
</body>
</html>
